#pragma config(Motor,  port1,           mFrontLeft,    tmotorVex393_HBridge,       openLoop, reversed)
#pragma config(Motor,  port2,           mShooter2,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port3,           mShooter3,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port4,           mShooter4,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port5,           mBackLeft,     tmotorVex393_MC29,          openLoop, reversed)
#pragma config(Motor,  port6,           mFrontRight,   tmotorVex393_MC29,          openLoop)
#pragma config(Motor,  port7,           mShooter7,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port8,           mShooter8,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port9,           mShooter9,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port10,          mBackRight,    tmotorVex393_HBridge,       openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//


//--------------------Button Mapping--------------------
//Drive axis
#define joyDriveA Ch1 //First axis for the drive joysticks
#define joyDriveB Ch4 //Second axis for the drive joysticks
#define joyDriveC Ch3 //Third axis for the drive joysticks

//Shooter buttons
#define joyShooterZero Btn5U //Set the shooter speed to zero (E-STOP)
#define joyShooterIncU Btn6D //Increment shooter speed
#define joyShooterIncD Btn5D //Decrement the shooter speed
#define joyShooterFull Btn6U //Set the shooter speed to max (127)


//--------------------Constants--------------------
#define targetShooterPos = 127; //Optimal speed for firing


//--------------------Variables--------------------
int shooterSpeed = 0; //stores the current set speed for the shooter motors

//Helper function for setting all drive motors in one command
void setDriveMotors(int fL, int fR, int bL, int bR) {
   motor[mFrontLeft] = fL;
   motor[mFrontRight] = fR;
   motor[mBackLeft] = bL;
   motor[mBackRight] = bR;
}

//Helper function for setting all shooter motors in one command, with correct polarity
void setShooterMotors(int power) {
   motor[mShooter2] = power;
   motor[mShooter3] = -power;
   motor[mShooter4] = -power;
   motor[mShooter7] = -power;
   motor[mShooter8] = power;
   motor[mShooter9] = power;
}


task main(){

  //Main operator control loop
  while(true){
	  int x = vexRT[joyDriveA];
	  int y = vexRT[joyDriveB];
  	int z = vexRT[joyDriveC];

  	//Basic configuration for 4 meccanum wheel drive
  	setDriveMotors(x + z + y,
	                 x - z - y,
	                 x + z - y,
	                 x - z + y);

	  //bring the shooter to a full stop permanently
  	if (vexRT[joyShooterZero] == 1) {
	  	shooterSpeed = 0;
	  	setShooterMotors(0);

	  //Increment the motor speed by 10
  	}else if (vexRT[joyShooterIncU] == 1) {
	    shooterSpeed += 10;
	    setShooterMotors(shooterSpeed);

	  //Decrement the motor speed by 10
	  }else if (vexRT[joyShooterIncD] == 1) {
	    shooterSpeed -= 10;
	    setShooterMotors(shooterSpeed);

	  //Set the shooter speed to the maximum temporarily
    }else if (vexRT[joyShooterFull] == 1) {
		  setShooterMotors(127);

    } //End shooter button if statements
  } //End main program loop
} //End main subroutine
